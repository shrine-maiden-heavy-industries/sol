

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>========================== Self-made Hardware Bringup &mdash; SOL 0.5.1.dev2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
      <link rel="stylesheet" type="text/css" href="../_static/css/styles.css?v=e585626c" />
      <link rel="stylesheet" type="text/css" href="../_static/platformpicker.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/styles.css?v=e585626c" />

  
    <link rel="canonical" href="https://sol.shmdn.link/hardware/bringup_guide.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=58a862f5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/platformpicker.js"></script>
      <script src="../_static/wavedrom.skin.js"></script>
      <script src="../_static/wavedrom.min.js"></script>
      <script src="../_static/js/wavedrom.min.js?v=db79c4d1"></script>
      <script src="../_static/js/wavedrom.skin.js?v=986d6b75"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SOL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Status &amp; Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features.html#support-for-device-mode">Support for Device Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#support-for-host-mode">Support for Host Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-prerequisites">Installing Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-yosys">Installing Yosys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-torii">Installing Torii</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-sol">Installing SOL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gateware/index.html">Gateware Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gateware/interface/index.html">Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/pipe.html">PIPE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/pipe.html#sol_usb.gateware.interface.pipe.PIPEInterface"><code class="docutils literal notranslate"><span class="pre">PIPEInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/pipe.html#sol_usb.gateware.interface.pipe.AsyncPIPEInterface"><code class="docutils literal notranslate"><span class="pre">AsyncPIPEInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/pipe.html#sol_usb.gateware.interface.pipe.GearedPIPEInterface"><code class="docutils literal notranslate"><span class="pre">GearedPIPEInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/ulpi.html">ULPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIDataRecord"><code class="docutils literal notranslate"><span class="pre">ULPIDataRecord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIDirRecord"><code class="docutils literal notranslate"><span class="pre">ULPIDirRecord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIInterface"><code class="docutils literal notranslate"><span class="pre">ULPIInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIRegisterWindow"><code class="docutils literal notranslate"><span class="pre">ULPIRegisterWindow</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIRxEventDecoder"><code class="docutils literal notranslate"><span class="pre">ULPIRxEventDecoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIControlTranslator"><code class="docutils literal notranslate"><span class="pre">ULPIControlTranslator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPITransmitTranslator"><code class="docutils literal notranslate"><span class="pre">ULPITransmitTranslator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.UTMITranslator"><code class="docutils literal notranslate"><span class="pre">UTMITranslator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/utmi.html">UTMI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIOperatingMode"><code class="docutils literal notranslate"><span class="pre">UTMIOperatingMode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMITerminationSelect"><code class="docutils literal notranslate"><span class="pre">UTMITerminationSelect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMITransmitInterface"><code class="docutils literal notranslate"><span class="pre">UTMITransmitInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIInterfaceMultiplexer"><code class="docutils literal notranslate"><span class="pre">UTMIInterfaceMultiplexer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIInterface"><code class="docutils literal notranslate"><span class="pre">UTMIInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/gateware/index.html">Gateware PHY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/phy.html">Gateware PHY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/receiver.html">Gateware PHY - Receiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/transmitter.html">Gateware PHY - Transmitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/index.html#sol_usb.gateware.interface.gateware_phy.GatewarePHY"><code class="docutils literal notranslate"><span class="pre">GatewarePHY</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/serdes/index.html">SerDes PHY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/ecp5.html">SerDes PHY - ECP5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/lfps.html">SerDes PHY - LFPS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/xc7.html">SerDes PHY - XC7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.ECP5SerDesPIPE"><code class="docutils literal notranslate"><span class="pre">ECP5SerDesPIPE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.XC7GTPSerDesPIPE"><code class="docutils literal notranslate"><span class="pre">XC7GTPSerDesPIPE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.XC7GTXSerDesPIPE"><code class="docutils literal notranslate"><span class="pre">XC7GTXSerDesPIPE</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gateware/soc/index.html">SoC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/cpu.html">CPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/event.html">Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/memory.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/soc/memory.html#sol_usb.gateware.soc.memory.WishboneRAM"><code class="docutils literal notranslate"><span class="pre">WishboneRAM</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/soc/memory.html#sol_usb.gateware.soc.memory.WishboneROM"><code class="docutils literal notranslate"><span class="pre">WishboneROM</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/peripheral.html">Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/simplesoc.html">SimpleSoC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/uart.html">UART</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gateware/stream/index.html">Stream</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.StreamInterface"><code class="docutils literal notranslate"><span class="pre">StreamInterface</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.StreamInterface.stream_eq"><code class="docutils literal notranslate"><span class="pre">StreamInterface.stream_eq()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.StreamInterface.tap"><code class="docutils literal notranslate"><span class="pre">StreamInterface.tap()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/stream/index.html#module-sol_usb.gateware.stream.arbiter">Arbiter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.arbiter.StreamMultiplexer"><code class="docutils literal notranslate"><span class="pre">StreamMultiplexer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.arbiter.StreamArbiter"><code class="docutils literal notranslate"><span class="pre">StreamArbiter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/stream/index.html#module-sol_usb.gateware.stream.generator">Generator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.generator.ConstantStreamGenerator"><code class="docutils literal notranslate"><span class="pre">ConstantStreamGenerator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.generator.StreamSerializer"><code class="docutils literal notranslate"><span class="pre">StreamSerializer</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gateware/usb/index.html">USB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/analyzer.html">Analyzer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/analyzer.html#sol_usb.gateware.usb.analyzer.USBAnalyzer"><code class="docutils literal notranslate"><span class="pre">USBAnalyzer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/request.html">Request</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.control">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.interface">Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.standard">Standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/stream.html">Stream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBInStreamInterface"><code class="docutils literal notranslate"><span class="pre">USBInStreamInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBOutStreamInterface"><code class="docutils literal notranslate"><span class="pre">USBOutStreamInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBOutStreamBoundaryDetector"><code class="docutils literal notranslate"><span class="pre">USBOutStreamBoundaryDetector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><code class="docutils literal notranslate"><span class="pre">USBRawSuperSpeedStream</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.SuperSpeedStreamArbiter"><code class="docutils literal notranslate"><span class="pre">SuperSpeedStreamArbiter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.SuperSpeedStreamInterface"><code class="docutils literal notranslate"><span class="pre">SuperSpeedStreamInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/usb2/index.html">USB2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/control.html">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/descriptor.html">Descriptor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/deserializer.html">Deserializer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/device.html">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/endpoint.html#gateware-endpoint-interfaces">Gateware Endpoint Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/packet.html">Packet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/request.html">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/reset.html">Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/transfer.html">Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/endpoints.html">Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/interfaces.html">Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#conceptual-components">Conceptual Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#token-detector">Token Detector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#handshake-detector">Handshake Detector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#data-packet-receiver">Data Packet Receiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#device-state-manager">Device State Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#handshake-generator">Handshake Generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#data-packet-transmitter">Data Packet Transmitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#data-crc-unit">Data CRC Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#interpacket-timer">Interpacket Timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#reset-suspend-sequencer">Reset/Suspend Sequencer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/usb3/index.html">USB3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/application.html">Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/device.html">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/endpoints.html">Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/link.html">Link</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/physical.html">Physical</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/protocol.html">Protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/request.html">Request</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom.html">SOL On Your Own Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom.html#high-speed-via-a-ulpi-phy">High-Speed via a ULPI PHY</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom.html#full-speed-using-fpga-i-o">Full-Speed using FPGA I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#deprecated">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id1">0.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id2">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id3">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id4">0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id5">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id6">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id7">0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id8">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id9">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id10">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id11">0.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id12">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id13">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id14">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id15">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id16">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id17">0.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id18">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id19">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id20">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id21">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id22">0.1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/shrine-maiden-heavy-industries/sol/">Source Code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SOL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">==========================
Self-made Hardware Bringup</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/shrine-maiden-heavy-industries/sol/blob/main/docs/hardware/bringup_guide.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="self-made-hardware-bringup">
<h1>==========================
Self-made Hardware Bringup<a class="headerlink" href="#self-made-hardware-bringup" title="Link to this heading"></a></h1>
<p>This guide is intended to help you bring up a LUNA board you’ve built
yourself. If you’ve received your board from Great Scott Gadgets, it
should already be set up, and you shouldn’t need to follow these steps.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>A LUNA board with a populated <em>Debug Controller</em> microprocessor. This
is the SAMD microcontroller located in the Debug section at the
bottom of the board.</p></li>
<li><p>A programmer capable of uploading firmware via SWD. Examples include
the <code class="docutils literal notranslate"><span class="pre">Black</span> <span class="pre">Magic</span> <span class="pre">Probe</span> <span class="pre">&lt;https://github.com/blacksphere/blackmagic&gt;</span></code><strong>; the <code class="docutils literal notranslate"><span class="pre">Segger</span> <span class="pre">J-Link</span> <span class="pre">&lt;https://www.segger.com/products/debug-probes/j-link/&gt;</span></code></strong>, and
many <code class="docutils literal notranslate"><span class="pre">OpenOCD</span> <span class="pre">compatible</span> <span class="pre">boards</span> <span class="pre">&lt;http://openocd.org/doc/html/Debug-Adapter-Hardware.html&gt;</span></code>__.</p></li>
<li><p>A toolchain capable of building binaries for Cortex-M0 processors,
such as the <code class="docutils literal notranslate"><span class="pre">GNU</span> <span class="pre">Arm</span> <span class="pre">Embedded</span> <span class="pre">&lt;https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm&gt;</span></code>__
toolchain. If you’re using Linux or macOS, you’ll likely want to
fetch this using a package manager; a suitable toolchain may be
called something like <code class="docutils literal notranslate"><span class="pre">arm-none-eabi-gcc</span></code>.</p></li>
<li><p>A DFU programming utility, such as
<code class="docutils literal notranslate"><span class="pre">dfu-util</span> <span class="pre">&lt;http://dfu-util.sourceforge.net/&gt;</span></code>__.</p></li>
</ul>
</section>
<section id="bring-up-process">
<h2>Bring-up Process<a class="headerlink" href="#bring-up-process" title="Link to this heading"></a></h2>
<p>The high-level process for bringing up your board is as follows:</p>
<ol class="arabic simple">
<li><p>Compile and upload the <em>Saturn-V</em> bootloader, which allows Debug
Controller to program itself.</p></li>
<li><p>Compile and upload the <em>Apollo</em> Debug Controller firmware, which
allows FPGA configuration &amp; flashing; and provides debug interfaces
for working with the FPGA.</p></li>
<li><p>Install the <code class="docutils literal notranslate"><span class="pre">sol</span></code> tools, and run through the self-test procedures
to validate that your board is working.</p></li>
</ol>
</section>
<section id="build-upload-saturn-v">
<h2>Build/upload Saturn-V<a class="headerlink" href="#build-upload-saturn-v" title="Link to this heading"></a></h2>
<p>The “recovery mode (RVM)” bootloader for LUNA boards is named
<em>Saturn-V</em>; as it’s the first stage in “getting to LUNA”. The bootloader
is located in <a class="reference external" href="https://github.com/greatscottgadgets/saturn-v">in its own repository</a>.</p>
<p>You can clone the bootloader using <code class="docutils literal notranslate"><span class="pre">git</span></code>:</p>
<p>.. code:: sh</p>
<p>$ git clone https://github.com/greatscottgadgets/saturn-v</p>
<p>Build the DFU bootloader by invoking <code class="docutils literal notranslate"><span class="pre">make</span></code>. An example invocation
for modern LUNA hardware might look like:</p>
<p>.. code:: sh</p>
<p>$ cd saturn-v
$ make</p>
<p>If you’re building a board that predates r0.3 hardware, you’ll need to specify
the board you’re building for:</p>
<p>.. code:: sh</p>
<p>$ cd saturn-v
$ make BOARD=sol_d21</p>
<p>The build should yield two useful build products: <code class="docutils literal notranslate"><span class="pre">bootloader.elf</span></code> and
<code class="docutils literal notranslate"><span class="pre">bootloader.bin</span></code>; your SWD programmer will likely consume one of these
two files.</p>
<p>Next, connect your SWD programmer to the header labeled <code class="docutils literal notranslate"><span class="pre">uC</span></code>, and
upload bootloader image. If you’re using the Black Magic Probe, this
might look like:</p>
<p>.. code:: sh</p>
<p>$ arm-none-eabi-gdb -nx –batch <br />
-ex ‘target extended-remote /dev/ttyACM0’ <br />
-ex ‘monitor swdp_scan’ <br />
-ex ‘attach 1’ <br />
-ex ‘load’ <br />
-ex ‘kill’ <br />
bootloader.elf</p>
<p>If your programmer works best with <code class="docutils literal notranslate"><span class="pre">.bin</span></code> files, be sure to upload the
<code class="docutils literal notranslate"><span class="pre">bootloader.bin</span></code> to the start of flash (address <code class="docutils literal notranslate"><span class="pre">0x00000000</span></code>).</p>
<p>Once the bootloader is installed, you should see LED <code class="docutils literal notranslate"><span class="pre">A</span></code> blinking
rapidly. This is the indication that your board is in Recovery Mode
(RVM), and can be programmed via DFU.</p>
<p>You can verify that the board is DFU-programmable by running
<code class="docutils literal notranslate"><span class="pre">dfu-util</span></code>:</p>
<p>.. code:: sh</p>
<p>$ dfu-util –list</p>
<p>If your device shows up as a LUNA board, congratulations! You’re ready
to move on to the next step.</p>
<p>Optional: Bootloader Locking</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
Optionally, you can reversibly lock the bootloader region of the Debug
Controller, preventing you from accidentally overwriting the bootloader.
This is most useful for users developing code for the Debug Controller.

If you choose to lock the bootloader, you should lock the first ``4KiB``
of flash. Note that currently, the bootloader lock feature of *Black
Magic Probe* devices always locks ``8KiB`` of flash; and thus cannot be
used for LUNA.

Build/upload Luminary
-------------------

The next bringup step is to upload the *Luminary* Debug Controller
firmware, which will provide an easy way to interface with the board&#39;s
FPGA and any gateware running on it. The Luminary source is located
[in its own repository](https://github.com/shrine-maiden-heavy-industries/luminary).

You can clone the bootloader using `git`:

.. code:: sh

   $ git clone https://github.com/shrine-maiden-heavy-industries/luminary



You can build and run the firmware in one step by invoking ``make``. In
order to ensure your firmware matches the hardware it&#39;s running on,
you&#39;ll need to provide the hardware revision using the
``BOARD_REVISION_MAJOR`` and ``BOARD_REVISION_MINOR`` make variables.

The board&#39;s hardware revision is printed on its silkscreen in a
``r(MAJOR).(MINOR)`` format. Board ``r0.2`` would have a
``BOARD_REVISION_MAJOR=0`` and a ``BOARD_REVISION_MINOR=2``. If your
board&#39;s revision ends in a ``+``, do not include it in the revision
number.

An example invocation for a ``r0.2`` board might be:

.. code:: sh

   $ make BOARD_REVISION_MAJOR=0 BOARD_REVISION_MINOR=2 dfu

Once programming is complete, only LED ``E`` should be blinking;
indicating that the Luminary firmware is idle.

Running Self-Tests
------------------

The final step of bringup is to validate the functionality of your
hardware. This is most easily accomplished by running SOL&#39;s interactive
self-test applet.

Before you can run the applet, you&#39;ll need to have a working ``sol``
development environment. See [[Setting up the development environment]]
to get your environment set up.

Next, we can check to make sure your LUNA board is recognized by the
SOL toolchain. Running the ``luminary info`` command will list any
detected devices:

.. code:: sh

   $ luminary info
   Detected a LUNA device!
       Hardware: LUNA r0.2
       Serial number: &lt;snip&gt;

Once you&#39;ve validated connectivity, you&#39;re ready to try running the
``interactive-test`` applet. From the root of the repository:

.. code:: sh

   $ python3 applets/interactive-test.py


Troubleshooting
---------------

**Issue: some of the build files weren&#39;t found;** ``make`` **produces a message like &quot;** ``no rule to make target`` **&quot;.**

Chances are, your clone of SOL is was pulled down without its
submodules. You can pull down the relevant submodules using ``git``:

.. code:: sh

   $ git submodule update --init --recursive

**Issue: the ``luminary info`` command doesn&#39;t see a connected board.**

On Linux, this can be caused by a permissions issue. Check first for the
presence of your device using ``lsusb``; if you see a device with the
VID/PID ``1d50:615c``, your board is present – and you likely have a
permissions issue. You&#39;ll likely need to install permission-granting
udev rules.
</pre></div>
</div>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020 Great Scott Gadgets.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>