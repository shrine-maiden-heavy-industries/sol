

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SOL On Your Own Hardware &mdash; SOL 0.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5349f25f" />
      <link rel="stylesheet" type="text/css" href="../_static/css/styles.css?v=e585626c" />
      <link rel="stylesheet" type="text/css" href="../_static/platformpicker.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/styles.css?v=e585626c" />

  
    <link rel="canonical" href="https://sol.shmdn.link/hardware/custom.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=67b26ddf"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/platformpicker.js"></script>
      <script src="../_static/wavedrom.skin.js"></script>
      <script src="../_static/wavedrom.min.js"></script>
      <script src="../_static/js/wavedrom.min.js?v=db79c4d1"></script>
      <script src="../_static/js/wavedrom.skin.js?v=986d6b75"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="../changelog.html" />
    <link rel="prev" title="Hardware" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SOL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Status &amp; Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features.html#support-for-device-mode">Support for Device Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#support-for-host-mode">Support for Host Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-prerequisites">Installing Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-yosys">Installing Yosys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#installing-torii">Installing Torii</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#installing-sol">Installing SOL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../install.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gateware/index.html">Gateware Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gateware/interface/index.html">Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/pipe.html">PIPE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/pipe.html#sol_usb.gateware.interface.pipe.PIPEInterface"><code class="docutils literal notranslate"><span class="pre">PIPEInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/pipe.html#sol_usb.gateware.interface.pipe.AsyncPIPEInterface"><code class="docutils literal notranslate"><span class="pre">AsyncPIPEInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/pipe.html#sol_usb.gateware.interface.pipe.GearedPIPEInterface"><code class="docutils literal notranslate"><span class="pre">GearedPIPEInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/ulpi.html">ULPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIDataRecord"><code class="docutils literal notranslate"><span class="pre">ULPIDataRecord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIDirRecord"><code class="docutils literal notranslate"><span class="pre">ULPIDirRecord</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIInterface"><code class="docutils literal notranslate"><span class="pre">ULPIInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIRegisterWindow"><code class="docutils literal notranslate"><span class="pre">ULPIRegisterWindow</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIRxEventDecoder"><code class="docutils literal notranslate"><span class="pre">ULPIRxEventDecoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPIControlTranslator"><code class="docutils literal notranslate"><span class="pre">ULPIControlTranslator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.ULPITransmitTranslator"><code class="docutils literal notranslate"><span class="pre">ULPITransmitTranslator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/ulpi.html#sol_usb.gateware.interface.ulpi.UTMITranslator"><code class="docutils literal notranslate"><span class="pre">UTMITranslator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/utmi.html">UTMI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIOperatingMode"><code class="docutils literal notranslate"><span class="pre">UTMIOperatingMode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMITerminationSelect"><code class="docutils literal notranslate"><span class="pre">UTMITerminationSelect</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMITransmitInterface"><code class="docutils literal notranslate"><span class="pre">UTMITransmitInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIInterfaceMultiplexer"><code class="docutils literal notranslate"><span class="pre">UTMIInterfaceMultiplexer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/utmi.html#sol_usb.gateware.interface.utmi.UTMIInterface"><code class="docutils literal notranslate"><span class="pre">UTMIInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/gateware/index.html">Gateware PHY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/phy.html">Gateware PHY</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/receiver.html">Gateware PHY - Receiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/transmitter.html">Gateware PHY - Transmitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/gateware/index.html#sol_usb.gateware.interface.gateware_phy.GatewarePHY"><code class="docutils literal notranslate"><span class="pre">GatewarePHY</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/interface/serdes/index.html">SerDes PHY</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/ecp5.html">SerDes PHY - ECP5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/lfps.html">SerDes PHY - LFPS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/xc7.html">SerDes PHY - XC7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.ECP5SerDesPIPE"><code class="docutils literal notranslate"><span class="pre">ECP5SerDesPIPE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.XC7GTPSerDesPIPE"><code class="docutils literal notranslate"><span class="pre">XC7GTPSerDesPIPE</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/interface/serdes/index.html#sol_usb.gateware.interface.serdes_phy.XC7GTXSerDesPIPE"><code class="docutils literal notranslate"><span class="pre">XC7GTXSerDesPIPE</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gateware/soc/index.html">SoC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/cpu.html">CPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/event.html">Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/memory.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/soc/memory.html#sol_usb.gateware.soc.memory.WishboneRAM"><code class="docutils literal notranslate"><span class="pre">WishboneRAM</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/soc/memory.html#sol_usb.gateware.soc.memory.WishboneROM"><code class="docutils literal notranslate"><span class="pre">WishboneROM</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/peripheral.html">Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/simplesoc.html">SimpleSoC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/soc/uart.html">UART</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gateware/stream/index.html">Stream</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.StreamInterface"><code class="docutils literal notranslate"><span class="pre">StreamInterface</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.StreamInterface.stream_eq"><code class="docutils literal notranslate"><span class="pre">StreamInterface.stream_eq()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.StreamInterface.tap"><code class="docutils literal notranslate"><span class="pre">StreamInterface.tap()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/stream/index.html#module-sol_usb.gateware.stream.arbiter">Arbiter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.arbiter.StreamMultiplexer"><code class="docutils literal notranslate"><span class="pre">StreamMultiplexer</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.arbiter.StreamArbiter"><code class="docutils literal notranslate"><span class="pre">StreamArbiter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/stream/index.html#module-sol_usb.gateware.stream.generator">Generator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.generator.ConstantStreamGenerator"><code class="docutils literal notranslate"><span class="pre">ConstantStreamGenerator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/stream/index.html#sol_usb.gateware.stream.generator.StreamSerializer"><code class="docutils literal notranslate"><span class="pre">StreamSerializer</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gateware/usb/index.html">USB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/analyzer.html">Analyzer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/analyzer.html#sol_usb.gateware.usb.analyzer.USBAnalyzer"><code class="docutils literal notranslate"><span class="pre">USBAnalyzer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/request.html">Request</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.control">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.interface">Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.standard">Standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/request.html#module-sol_usb.gateware.usb.request.windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/stream.html">Stream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBInStreamInterface"><code class="docutils literal notranslate"><span class="pre">USBInStreamInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBOutStreamInterface"><code class="docutils literal notranslate"><span class="pre">USBOutStreamInterface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBOutStreamBoundaryDetector"><code class="docutils literal notranslate"><span class="pre">USBOutStreamBoundaryDetector</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.USBRawSuperSpeedStream"><code class="docutils literal notranslate"><span class="pre">USBRawSuperSpeedStream</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.SuperSpeedStreamArbiter"><code class="docutils literal notranslate"><span class="pre">SuperSpeedStreamArbiter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/stream.html#sol_usb.gateware.usb.stream.SuperSpeedStreamInterface"><code class="docutils literal notranslate"><span class="pre">SuperSpeedStreamInterface</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/usb2/index.html">USB2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/control.html">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/descriptor.html">Descriptor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/deserializer.html">Deserializer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/device.html">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/endpoint.html#gateware-endpoint-interfaces">Gateware Endpoint Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/packet.html">Packet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/request.html">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/reset.html">Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/transfer.html">Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/endpoints.html">Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/interfaces.html">Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#conceptual-components">Conceptual Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#token-detector">Token Detector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#handshake-detector">Handshake Detector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#data-packet-receiver">Data Packet Receiver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#device-state-manager">Device State Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#handshake-generator">Handshake Generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#data-packet-transmitter">Data Packet Transmitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#data-crc-unit">Data CRC Unit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#interpacket-timer">Interpacket Timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb2/index.html#reset-suspend-sequencer">Reset/Suspend Sequencer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../gateware/usb/usb3/index.html">USB3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/application.html">Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/device.html">Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/endpoints.html">Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/link.html">Link</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/physical.html">Physical</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/protocol.html">Protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gateware/usb/usb3/request.html">Request</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SOL On Your Own Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#high-speed-via-a-ulpi-phy">High-Speed via a ULPI PHY</a></li>
<li class="toctree-l2"><a class="reference internal" href="#full-speed-using-fpga-i-o">Full-Speed using FPGA I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#deprecated">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id1">0.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id2">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id3">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id4">0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id5">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id6">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id7">0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id8">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id9">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id10">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id11">0.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id12">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id13">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id14">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id15">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id16">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id17">0.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id18">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id19">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id20">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changelog.html#id21">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changelog.html#id22">0.1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/shrine-maiden-heavy-industries/sol/">Source Code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SOL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Hardware</a></li>
      <li class="breadcrumb-item active">SOL On Your Own Hardware</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/shrine-maiden-heavy-industries/sol/blob/main/docs/hardware/custom.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sol-on-your-own-hardware">
<h1>SOL On Your Own Hardware<a class="headerlink" href="#sol-on-your-own-hardware" title="Link to this heading"></a></h1>
<p>The SOL stack is designed to be easy to use on your own FPGA hardware – if you can already run Torii designs on your board, all you’ll need is to set up some I/O definitions and some clock domains.</p>
<p>The exact platform requirements depend on how you’ll perform USB interfacing, and are detailed below.</p>
<section id="high-speed-via-a-ulpi-phy">
<h2>High-Speed via a ULPI PHY<a class="headerlink" href="#high-speed-via-a-ulpi-phy" title="Link to this heading"></a></h2>
<p>Using a ULPI PHY is relatively straightforward; and typically requires no hardware beyond the ULPI PHY. SOL works with
both designs that receive their <code class="docutils literal notranslate"><span class="pre">usb</span></code>-domain clocks from the PHY (typical) and designs that provide a 60MHz clock to
their PHY.</p>
<p>The following clock domains are required:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Domain Name</p></th>
<th class="head"><p>Frequency</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">usb</span></code></p></td>
<td><p>60 MHz</p></td>
<td><p>Core clock for the PHY’s clock domain. <em>Can be provided to the FPGA by the PHY, or provided to the PHY by the FPGA.</em>
<em>See below.</em></p></td>
</tr>
</tbody>
</table>
<p>An I/O resource with the following subsignals is required:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Subsignal Name</p></th>
<th class="head"><p>Width</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">clk</span></code></p></td>
<td><p>1</p></td>
<td><p>input <em>or</em> output</p></td>
<td><p>The ULPI bus clock. Should be configured as an input if the PHY is providing our clock
(typical), or as an output if the FPGA will provide the clock to the PHY.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">data</span></code></p></td>
<td><p>8</p></td>
<td><p>bidirectional</p></td>
<td><p>The bidirectional data bus.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dir</span></code></p></td>
<td><p>1</p></td>
<td><p>input</p></td>
<td><p>The ULPI <em>direction</em> signal.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nxt</span></code></p></td>
<td><p>1</p></td>
<td><p>input</p></td>
<td><p>The ULPI <em>next</em> signal.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stp</span></code></p></td>
<td><p>1</p></td>
<td><p>output</p></td>
<td><p>The ULPI <em>stop</em> signal.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rst</span></code></p></td>
<td><p>1</p></td>
<td><p>output</p></td>
<td><p>The ULPI <em>reset</em> signal. The gateware asserts this signal when the PHY should be reset;
if the PHY requires an active-low reset, this can be inverted with <code class="docutils literal notranslate"><span class="pre">PinsN</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>An example resource might look like:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># Targeting the USB3300 PHY, which provides our clock.</span>
<span class="n">Resource</span><span class="p">(</span><span class="s1">&#39;ulpi&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>  <span class="n">Pins</span><span class="p">(</span><span class="n">data_sites</span><span class="p">,</span>  <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;io&#39;</span><span class="p">)),</span>
        <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;clk&#39;</span><span class="p">,</span>   <span class="n">Pins</span><span class="p">(</span><span class="n">clk_site</span><span class="p">,</span>    <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span> <span class="p">)),</span>
        <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span>   <span class="n">Pins</span><span class="p">(</span><span class="n">dir_site</span><span class="p">,</span>    <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span> <span class="p">)),</span>
        <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;nxt&#39;</span><span class="p">,</span>   <span class="n">Pins</span><span class="p">(</span><span class="n">nxt_site</span><span class="p">,</span>    <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span> <span class="p">)),</span>
        <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;stp&#39;</span><span class="p">,</span>   <span class="n">Pins</span><span class="p">(</span><span class="n">stp_site</span><span class="p">,</span>    <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span> <span class="p">)),</span>
        <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;rst&#39;</span><span class="p">,</span>   <span class="n">Pins</span><span class="p">(</span><span class="n">reset_site</span><span class="p">,</span>  <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span> <span class="p">)),</span>
        <span class="n">Attrs</span><span class="p">(</span><span class="n">IO_TYPE</span> <span class="o">=</span> <span class="s1">&#39;LVCMOS33&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="full-speed-using-fpga-i-o">
<h2>Full-Speed using FPGA I/O<a class="headerlink" href="#full-speed-using-fpga-i-o" title="Link to this heading"></a></h2>
<p>SOL provides a <em>gateware PHY</em> that enables an FPGA to communicate at Full Speed using only FPGA 3V3 I/O
and a pull-up resistor. The FPGA must be able to provide stable 48 MHz and 12 MHz clocks.</p>
<p>The following clock domains are required:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Domain Name</p></th>
<th class="head"><p>Frequency</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">usb</span></code></p></td>
<td><p>12 MHz</p></td>
<td><p>Core clock for USB data. Ticks at the USB bitrate of 12MHz, and drives most of the USB logic.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">usb_io</span></code></p></td>
<td><p>48 MHz</p></td>
<td><p>Edge clock for the USB I/O. Used at the I/O boundary for clock recovery and NRZI encoding.</p></td>
</tr>
</tbody>
</table>
<p>An I/O resource with the following subsignals is required:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Subsignal Name</p></th>
<th class="head"><p>Width</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d_p</span></code></p></td>
<td><p>1</p></td>
<td><p>bidirectional</p></td>
<td><p>The raw USB D+ line; must be on a 3.3V logic bank.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">d_n</span></code></p></td>
<td><p>1</p></td>
<td><p>bidirectional</p></td>
<td><p>The raw USB D- line; must be on a 3.3V logic bank.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pullup</span></code></p></td>
<td><p>1</p></td>
<td><p>output</p></td>
<td><p>Control for the USB pull-up resistor; should be connected to D+ via a 1.5k resistor.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vbus_valid</span></code></p></td>
<td><p>1</p></td>
<td><p>input</p></td>
<td><p><em>Optional</em>. If provided, this signal will be used for VBUS detection logic; should be asserted whenever
VBUS is present. Many devices are ‘bus-powered’ (receive their power from USB), and thus have no need
for VBUS detection, in which case this signal can be omitted.</p></td>
</tr>
</tbody>
</table>
<p>An example resource might look like:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">Resource</span><span class="p">(</span><span class="s1">&#39;usb&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;d_p&#39;</span><span class="p">,</span>    <span class="n">Pins</span><span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">)),</span>
    <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;d_n&#39;</span><span class="p">,</span>    <span class="n">Pins</span><span class="p">(</span><span class="s1">&#39;A2&#39;</span><span class="p">)),</span>
    <span class="n">Subsignal</span><span class="p">(</span><span class="s1">&#39;pullup&#39;</span><span class="p">,</span> <span class="n">Pins</span><span class="p">(</span><span class="s1">&#39;D5&#39;</span><span class="p">,</span> <span class="nb">dir</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">)),</span>
    <span class="n">Attrs</span><span class="p">(</span><span class="n">IO_STANDARD</span> <span class="o">=</span> <span class="s1">&#39;SB_LVCMOS&#39;</span><span class="p">),</span>
<span class="p">),</span>
</pre></div>
</div>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Hardware" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020 Great Scott Gadgets.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>